{% set limit  = (uri.query('limit')  ?: 10)|int %}
{% set offset = (uri.query('offset') ?: 0)|int %}

{# Pick your collection-building logic here (filtered or not) #}
{% set all = taxonomy.findTaxonomy({"category": "review"}) | sort | reverse %}

{% set slice = all.slice(offset, limit) %}
{% set has_more = (offset + limit) < (all|length) %}

{% set html %}
  {% for review in slice %}
    {% include 'partials/review-card.html.twig' with { review: review } %}
  {% endfor %}
{% endset %}

{{ {
  debug: {
    template_used: _self,                // which .json.twig was rendered
    seen_limit: limit,
    seen_offset: offset,
    total_available: all|length,
    first_returned_title: slice|length ? slice|first.title : null
  },
  has_more: has_more,
  html: html
}|json_encode|raw }}
